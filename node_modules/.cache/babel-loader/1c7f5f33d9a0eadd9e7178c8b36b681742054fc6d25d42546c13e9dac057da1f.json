{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\vaibh\\\\OneDrive\\\\Desktop\\\\college\\\\web devlopment\\\\Zepto Prject\\\\my-ap\\\\src\\\\CanvasEditor.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Canvas {\n  constructor(canvas, templateData) {\n    this.canvas = canvas;\n    this.ctx = canvas.getContext('2d');\n    this.templateData = templateData;\n  }\n  draw() {\n    const image = new Image();\n    image.onload = () => {\n      this.ctx.drawImage(image, 0, 0, this.canvas.width, this.canvas.height);\n      this.drawMask();\n      this.drawCaption();\n      this.drawCTA();\n    };\n    image.src = this.templateData.urls.coffeeimg;\n  }\n  drawMask() {\n    const mask = new Image();\n    mask.onload = () => {\n      this.ctx.globalCompositeOperation = 'source-atop';\n      this.ctx.drawImage(mask, this.templateData.image_mask.x, this.templateData.image_mask.y, this.templateData.image_mask.width, this.templateData.image_mask.height);\n    };\n    mask.src = this.templateData.urls.mask;\n  }\n  drawCaption() {\n    this.ctx.fillStyle = this.templateData.caption.text_color;\n    this.ctx.font = `${this.templateData.caption.font_size}px Arial`;\n    this.ctx.textAlign = this.templateData.caption.alignment;\n    const lines = this.getLines(this.templateData.caption.text, this.templateData.caption.max_characters_per_line);\n    lines.forEach((line, index) => {\n      this.ctx.fillText(line, this.templateData.caption.position.x, this.templateData.caption.position.y + index * (this.templateData.caption.font_size + 5));\n    });\n  }\n  drawCTA() {\n    this.ctx.fillStyle = this.templateData.cta.text_color;\n    this.ctx.fillRect(this.templateData.cta.position.x, this.templateData.cta.position.y, 100, 40);\n    this.ctx.fillStyle = this.templateData.cta.background_color;\n    this.ctx.fillText(this.templateData.cta.text, this.templateData.cta.position.x + 10, this.templateData.cta.position.y + 30);\n  }\n  getLines(text, maxWidth) {\n    const words = text.split(' ');\n    const lines = [];\n    let currentLine = words[0];\n    for (let i = 1; i < words.length; i++) {\n      const word = words[i];\n      const width = this.ctx.measureText(`${currentLine} ${word}`).width;\n      if (width < maxWidth) {\n        currentLine += ` ${word}`;\n      } else {\n        lines.push(currentLine);\n        currentLine = word;\n      }\n    }\n    lines.push(currentLine);\n    return lines;\n  }\n}\nconst CanvasEditor = ({\n  templateData\n}) => {\n  _s();\n  const canvasRef = useRef(null);\n  useEffect(() => {\n    const canvas = new Canvas(canvasRef.current, templateData);\n    canvas.draw();\n  }, [templateData]);\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    ref: canvasRef,\n    width: 1080,\n    height: 1080,\n    style: {\n      height: 400,\n      width: 400\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n_s(CanvasEditor, \"UJgi7ynoup7eqypjnwyX/s32POg=\");\n_c = CanvasEditor;\nexport default CanvasEditor;\nvar _c;\n$RefreshReg$(_c, \"CanvasEditor\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","Canvas","constructor","canvas","templateData","ctx","getContext","draw","image","Image","onload","drawImage","width","height","drawMask","drawCaption","drawCTA","src","urls","coffeeimg","mask","globalCompositeOperation","image_mask","x","y","fillStyle","caption","text_color","font","font_size","textAlign","alignment","lines","getLines","text","max_characters_per_line","forEach","line","index","fillText","position","cta","fillRect","background_color","maxWidth","words","split","currentLine","i","length","word","measureText","push","CanvasEditor","_s","canvasRef","current","ref","style","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/vaibh/OneDrive/Desktop/college/web devlopment/Zepto Prject/my-ap/src/CanvasEditor.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\r\n\r\nclass Canvas {\r\n  constructor(canvas, templateData) {\r\n    this.canvas = canvas;\r\n    this.ctx = canvas.getContext('2d');\r\n    this.templateData = templateData;\r\n  }\r\n\r\n  draw() {\r\n    const image = new Image();\r\n    image.onload = () => {\r\n      this.ctx.drawImage(image, 0, 0, this.canvas.width, this.canvas.height);\r\n      this.drawMask();\r\n      this.drawCaption();\r\n      this.drawCTA();\r\n    };\r\n    image.src = this.templateData.urls.coffeeimg;\r\n  }\r\n\r\n  drawMask() {\r\n    const mask = new Image();\r\n    mask.onload = () => {\r\n      this.ctx.globalCompositeOperation = 'source-atop';\r\n      this.ctx.drawImage(mask, this.templateData.image_mask.x, this.templateData.image_mask.y, this.templateData.image_mask.width, this.templateData.image_mask.height);\r\n    };\r\n    mask.src = this.templateData.urls.mask;\r\n  }\r\n\r\n  drawCaption() {\r\n    this.ctx.fillStyle = this.templateData.caption.text_color;\r\n    this.ctx.font = `${this.templateData.caption.font_size}px Arial`;\r\n    this.ctx.textAlign = this.templateData.caption.alignment;\r\n    const lines = this.getLines(this.templateData.caption.text, this.templateData.caption.max_characters_per_line);\r\n    lines.forEach((line, index) => {\r\n      this.ctx.fillText(line, this.templateData.caption.position.x, this.templateData.caption.position.y + index * (this.templateData.caption.font_size + 5));\r\n    });\r\n  }\r\n\r\n  drawCTA() {\r\n    this.ctx.fillStyle = this.templateData.cta.text_color;\r\n    this.ctx.fillRect(this.templateData.cta.position.x, this.templateData.cta.position.y, 100, 40);\r\n    this.ctx.fillStyle = this.templateData.cta.background_color;\r\n    this.ctx.fillText(this.templateData.cta.text, this.templateData.cta.position.x + 10, this.templateData.cta.position.y + 30);\r\n  }\r\n\r\n  getLines(text, maxWidth) {\r\n    const words = text.split(' ');\r\n    const lines = [];\r\n    let currentLine = words[0];\r\n\r\n    for (let i = 1; i < words.length; i++) {\r\n      const word = words[i];\r\n      const width = this.ctx.measureText(`${currentLine} ${word}`).width;\r\n      if (width < maxWidth) {\r\n        currentLine += ` ${word}`;\r\n      } else {\r\n        lines.push(currentLine);\r\n        currentLine = word;\r\n      }\r\n    }\r\n    lines.push(currentLine);\r\n    return lines;\r\n  }\r\n}\r\n\r\nconst CanvasEditor = ({ templateData }) => {\r\n  const canvasRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    const canvas = new Canvas(canvasRef.current, templateData);\r\n    canvas.draw();\r\n  }, [templateData]);\r\n\r\n  return (\r\n    <canvas\r\n      ref={canvasRef}\r\n      width={1080}\r\n      height={1080}\r\n      style={{ height: 400, width: 400 }}\r\n    />\r\n  );\r\n};\r\n\r\nexport default CanvasEditor;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}